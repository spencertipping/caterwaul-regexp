caterwaul.module("regexp",function(a){(function(){var b=function(){var f=arguments;return(function(){var h=f[0],g=f[1];return h instanceof this.constructor?(function(i){return i.data=h.data,i.length=0,i.context=h.context,i
}).call(this,(this)):(function(i){return i.data=h,i.length=0,i.context=g,(function(l){var j,n,k,o,m;for(var k=0,o=l.length;k<o;++k){j=l[k],(i.push(j))}return l}).call(this,Array.prototype.slice.call(f,2)),i
}).call(this,(this))}).call(this)},e={i:function(){return this.context.flags.i},m:function(){return this.context.flags.m},g:function(){return this.context.flags.g
},concat:function(f){return new this.constructor(",",this.context,this,f)},match_groups:function(){return this.context.groups},referenced_group:function(){return this.context.groups[this[0].data-1]
},is_zero_width:function(){return/^[\^\$]$|^\\[Bb]$/.test(this.data)||this.is_positive_lookahead()||this.is_negative_lookahead()},is_one_or_more:function(){return this.length&&/^\+\??$/.test(this.data)
},is_zero_or_more:function(){return this.length&&/^\*\??$/.test(this.data)},is_optional:function(){return this.length&&/^\?$/.test(this.data)},is_non_greedy:function(){return this.length&&/.\?$/.test(this.data)
},is_repetition:function(){return this.length&&/^[\+\*\{]\??$|^\?$/.test(this.data)},is_wildcard:function(){return this.is_atom()&&/^_/.test(this.data)},leaf_nodes_only:function(){return false
},without_metadata:function(){return this},repeated_child:function(){return/^\{/.test(this.data)?this[2]:this[0]},is_character_class:function(){return/^\[/.test(this.data)
},is_single_escape:function(){return/^\\.+$/.test(this.data)},is_range:function(){return/^-$/.test(this.data)&&this.length===2},is_atom:function(){return !this.length
},is_any_group:function(){return/^\(/.test(this.data)},is_group:function(){return/^\($/.test(this.data)},is_forgetful:function(){return/^\(\?:$/.test(this.data)},is_positive_lookahead:function(){return/^\(\?=$/.test(this.data)
},is_negative_lookahead:function(){return/^\(\?!$/.test(this.data)},is_backreference:function(){return/^\\$/.test(this.data)},is_disjunction:function(){return/^\|$/.test(this.data)&&this.length===2
},is_join:function(){return/^,$/.test(this.data)&&this.length===2},lower_limit:function(){return/^\+\??$/.test(this.data)?1:/^\*\??$|^\?$/.test(this.data)?0:/^\{/.test(this.data)?this[0].data:(function(){throw new Error(("lower limit is undefined for nonrepetitive node "+(this)+""))
}).call(this)},upper_limit:function(){return/^[\*\+]\??$/.test(this.data)?Infinity:/^\?$/.test(this.data)?1:/^\{/.test(this.data)?this[1].data:(function(){throw new Error(("upper limit is undefined for nonrepetitive node "+(this)+""))
}).call(this)},minimum_length:function(){return this.is_zero_width()?0:this.is_single_escape()||this.is_character_class()?1:this.is_repetition()?this.lower_limit()*this.repeated_child().minimum_length():this.is_group()||this.is_forgetful()?this[0].minimum_length():this.is_backreference()?this.referenced_group().minimum_length():this.is_disjunction()?Math.min(this[0].minimum_length(),this[1].minimum_length()):this.is_join()?this[0].minimum_length()+this[1].minimum_length():this.data.length
},toString:function(){return this.is_any_group()?this.data+this[0].toString()+")":this.is_character_class()?this.data+this[0].toString()+"]":this.is_range()?(""+(this[0].toString())+"-"+(this[1].toString())+""):this.is_zero_or_more()||this.is_one_or_more()||this.is_optional()?this[0].toString()+this.data:this.is_repetition()?this[2].toString()+(this[0].data===this[1].data?("{"+(this[0].data)+"}"):this[1].data===Infinity?("{"+(this[0].data)+",}"):("{"+(this[0].data)+","+(this[1].data)+"}")):this.is_zero_width()?this.data:this.is_backreference()?("\\"+(this[0].data)+""):this.is_disjunction()?(""+(this[0].toString())+"|"+(this[1].toString())+""):this.is_join()?(""+(this[0].toString())+""+(this[1].toString())+""):this.data
}},c=function(f){return new RegExp(f.toString(),[f.i()?"i":"",f.m()?"m":"",f.g()?"g":""].join(""))},d=function(g,f){return(function(){var E=a.merge({atom:"character"},f),p=/^\/(.*)\/([gim]*)$/.exec(g.toString())||/^(.*)$/.exec(g.toString()),y=p[1],q=(function(s){return{i:/i/.test(s),m:/m/.test(s),g:/g/.test(s)}
}).call(this,(p[2])),l={groups:[],flags:q},n={},k=function(s,I){return !n[I.i]&&(function(J){return n[I.i]=true,J}).call(this,(l.groups.push(s)))},C=function(){var s=arguments;
return s[0]===","&&s[2]===""?s[1]:(function(I){return(function(L){var J,N,K,O,M;for(var K=0,O=L.length;K<O;++K){J=L[K],(I.push(J))}return L}).call(this,Array.prototype.slice.call(s,1)),I
}).call(this,(new a.regexp.syntax(s[0],l)))},t=function(s){return function(I){return I.i<y.length&&s.indexOf(y.charAt(I.i))!==-1&&{v:y.charAt(I.i),i:I.i+1}}},h=function(s){return function(I){return I.i<y.length&&y.substr(I.i,s.length)===s&&{v:y.substr(I.i,s.length),i:I.i+s.length}
}},m=function(I,s){return function(J){return J.i>=y.length||s(J)?false:{v:y.substr(J.i,I),i:J.i+I}}},w=function(s){return function(I){return I.i<y.length&&{v:y.substr(I.i,s),i:I.i+s}
}},H=function(){var s=arguments;return function(I){return(function(M){var J,O,K,P,N;for(var J=M[0],K=0,P=M.length,L;K<P;++K){J=M[K];if(L=(J(I))){return L}}return false
}).call(this,s)}},D=function(s){return function(I){return(function(J){return J.length>1&&{v:(function(M){var K,O,L,P,N;for(var N=new M.constructor(),L=0,P=M.length;
L<P;++L){K=M[L],N.push((K.v))}return N}).call(this,J.slice(1)),i:J[J.length-1].i}}).call(this,((function(L){var J,N,K,O,M;for(var M=[],J=L,K=0;J!==null;++K){M.push(J),J=(s(J)||null)
}return M}).call(this,I)))}},A=function(){var s=arguments;return function(I){return(function(){var J=[];return(function(K){return K&&{v:J,i:K.i}}).call(this,((function(M){var K,O,L,P,N;
for(var O=(I),L=0,P=M.length;L<P;++L){K=M[L],O=(O&&(function(Q){return Q&&J.push(Q.v),Q}).call(this,(K(O))))}return O}).call(this,s)))}).call(this)}},u=function(s){return s
},G=function(I,s){return function(J){return(function(){var K=I(J);return K&&{v:s.call(K,K.v),i:K.i}}).call(this)}},v=t("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_"),z=t("0123456789"),r=t("0123456789ABCDEFabcdef"),j=G(D(z),function(s){return +s.join("")
}),o=function(s){return s.i===y.length&&s},x=function(s){return x(s)},B=function(s){return B(s)},i=function(s){return i(s)},F=E.atom==="word"?H(D(t(" ")),u):u,x=(function(){var s=function(I){return s(I)
},s=H(G(A(B,s),function(I){return C(",",I[0],I[1])}),B,G(F,function(I){return""}));return H(G(A(s,t("|"),x),function(I){return C("|",I[0],I[2])}),s)}).call(this),B=(function(){var L=G(t("*"),C),N=G(t("+"),C),K=G(t("?"),C),J=H(G(A(t("{"),j,t("}")),function(O){return C("{",C(O[1]),C(O[1]))
}),G(A(t("{"),j,t(","),t("}")),function(O){return C("{",C(O[1]),C(Infinity))}),G(A(t("{"),j,t(","),j,t("}")),function(O){return C("{",C(O[1]),C(O[3]))})),s=H(L,N,J),M=t("?"),I=H(G(A(s,M),function(O){return(function(P){return P.data+=O[1],P
}).call(this,(O[0]))}),s,K);return H(G(A(i,I,F),function(O){return(function(P){return P.push(O[0]),P}).call(this,(O[1]))}),i)}).call(this),i=(function(){var U=G(A(h("(?="),F,x,h(")")),function(ab){return C("(?=",ab[2])
}),s=G(A(h("(?!"),F,x,h(")")),function(ab){return C("(?!",ab[2])}),Y=G(A(h("(?:"),F,x,h(")")),function(ab){return C("(?:",ab[2])}),O=G(A(h("("),F,x,h(")")),function(ab){return(function(ac){return k(ac,this),ac
}).call(this,(C("(",ab[2])))}),V=G(D(v),function(ab){return C(ab.join(""))}),X=function(ab){return X(ab)},X=(function(){var ab=H(G(A(w(1),t("-"),w(1)),function(ac){return C("-",C(ac[0]),C(ac[2]))
}),G(A(t("\\"),w(1)),function(ac){return C(ac.join(""))}),G(m(1,t("]")),C));return H(G(A(ab,X),function(ac){return C(",",ac[0],ac[1])}),ab)}).call(this),I=G(A(h("[^"),X,h("]")),function(ab){return C("[^",ab[1])
}),J=G(A(h("["),X,h("]")),function(ab){return C("[",ab[1])}),Z=G(t("^$"),C),N=G(A(t("\\"),t("BbWwSsDdfnrtv0*+.?|()[]{}\\$^")),function(ab){return C(ab.join(""))}),aa=G(h("\\/"),function(ab){return C("/")
}),Q=G(A(h("\\c"),w(1)),function(ab){return C(ab.join(""))}),W=G(A(h("\\x"),r,r),function(ab){return C(ab.join(""))}),T=G(A(h("\\u"),r,r,r,r),function(ab){return C(ab.join(""))
}),M=function(ab){return(function(){var ac=G(A(t("\\"),z),(function(ad){return C("\\",C(+ad[1]))}));return(function(ad){return ad&&ad.v<=l.groups.length?{v:C("\\",C(ad.v)),i:ad.i}:ac(ab)
}).call(this,(G(A(t("\\"),z,z),function(ad){return +(""+(ad[1])+""+(ad[2])+"")})(ab)))}).call(this)},S=G(t("."),C),L=G(m(1,t(")|+*?{")),C),R=E.atom==="word"?H(V,L):L,P=H(U,s,Y,O,I,J,Z,N,aa,Q,W,T,M,S,R),K=G(A(F,P,F),function(ab){return ab[1]
});return K}).call(this);return(function(s){return s?s.v[0]:(function(){throw new Error(("caterwaul.regexp(): failed to parse "+(g.toString())+""))}).call(this)}).call(this,(A(x,o)({i:0})))
}).call(this)};return a.regexp=function(g,f){return a.regexp.parse.apply(this,arguments)},a.regexp.syntax=a.syntax_subclass(b,e),a.regexp.parse=d,a.regexp.compile=c
}).call(this)});