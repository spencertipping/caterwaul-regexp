caterwaul.module("regexp",function(a){(function(){var b=function(){var f=arguments;return(function(){var h=f[0],g=f[1];return h instanceof this.constructor?(function(i){return i.data=h.data,i.length=0,i.context=h.context,i
}).call(this,(this)):(function(i){return i.data=h,i.length=0,i.context=g,(function(l){var j,n,k,o,m;for(var k=0,o=l.length;k<o;++k){j=l[k],(i.push(j))}return l}).call(this,Array.prototype.slice.call(f,2)),i
}).call(this,(this))}).call(this)},e={i:function(){return this.context.flags.i},m:function(){return this.context.flags.m},g:function(){return this.context.flags.g
},concat:function(f){return new this.constructor(",",this.context,this,f)},match_groups:function(){return this.context.groups},referenced_group:function(){return this.context.groups[this[0].data-1]
},is_zero_width:function(){return/^[\^\$]$|^\\[Bb]$/.test(this.data)||this.is_positive_lookahead()||this.is_negative_lookahead()},is_one_or_more:function(){return/^\+\??$/.test(this.data)
},is_zero_or_more:function(){return/^\*\??$/.test(this.data)},is_optional:function(){return/^\?$/.test(this.data)},is_non_greedy:function(){return/.\?$/.test(this.data)
},is_repetition:function(){return/^[\+\*\{]\??$|^\?$/.test(this.data)},is_wildcard:function(){return this.is_atom()&&/^_/.test(this.data)},repeated_child:function(){return/^\{/.test(this.data)?this[2]:this[0]
},is_character_class:function(){return/^\[/.test(this.data)},is_single_escape:function(){return/^\\.+$/.test(this.data)},is_range:function(){return/^-$/.test(this.data)&&this.length===2
},is_atom:function(){return !this.length},is_any_group:function(){return/^\(/.test(this.data)},is_group:function(){return/^\($/.test(this.data)},is_forgetful:function(){return/^\(\?:$/.test(this.data)
},is_positive_lookahead:function(){return/^\(\?=$/.test(this.data)},is_negative_lookahead:function(){return/^\(\?!$/.test(this.data)},is_backreference:function(){return/^\\$/.test(this.data)
},is_disjunction:function(){return/^\|$/.test(this.data)&&this.length===2},is_join:function(){return/^,$/.test(this.data)&&this.length===2},lower_limit:function(){return/^\+\??$/.test(this.data)?1:/^\*\??$|^\?$/.test(this.data)?0:/^\{/.test(this.data)?this[0].data:(function(){throw new Error(("lower limit is undefined for nonrepetitive node "+(this)+""))
}).call(this)},upper_limit:function(){return/^[\*\+]\??$/.test(this.data)?Infinity:/^\?$/.test(this.data)?1:/^\{/.test(this.data)?this[1].data:(function(){throw new Error(("upper limit is undefined for nonrepetitive node "+(this)+""))
}).call(this)},minimum_length:function(){return this.is_zero_width()?0:this.is_single_escape()||this.is_character_class()?1:this.is_repetition()?this.lower_limit()*this.repeated_child().minimum_length():this.is_group()||this.is_forgetful()?this[0].minimum_length():this.is_backreference()?this.referenced_group().minimum_length():this.is_disjunction()?Math.min(this[0].minimum_length(),this[1].minimum_length()):this.is_join()?this[0].minimum_length()+this[1].minimum_length():this.data.length
},toString:function(){return this.is_any_group()?this.data+this[0].toString()+")":this.is_character_class()?this.data+this[0].toString()+"]":this.is_range()?(""+(this[0].toString())+"-"+(this[1].toString())+""):this.is_zero_or_more()||this.is_one_or_more()||this.is_optional()?this[0].toString()+this.data:this.is_repetition()?this[2].toString()+(this[0].data===this[1].data?("{"+(this[0].data)+"}"):this[1].data===Infinity?("{"+(this[0].data)+",}"):("{"+(this[0].data)+","+(this[1].data)+"}")):this.is_zero_width()?this.data:this.is_backreference()?("\\"+(this[0].data)+""):this.is_disjunction()?(""+(this[0].toString())+"|"+(this[1].toString())+""):this.is_join()?(""+(this[0].toString())+""+(this[1].toString())+""):this.is_atom()?/^\w{2,}$/.test(this.data)?("(?:"+(this.data)+")"):this.data:this.data
}},c=function(f){return new RegExp(f.toString(),[f.i()?"i":"",f.m()?"m":"",f.g()?"g":""].join(""))},d=function(g,f){return(function(){var E=a.merge({atom:"character"},f),p=/^\/(.*)\/([gim]*)$/.exec(g.toString())||/^(.*)$/.exec(g.toString()),y=p[1],q=(function(s){return{i:/i/.test(s),m:/m/.test(s),g:/g/.test(s)}
}).call(this,(p[2])),l={groups:[],flags:q},n={},k=function(s,H){return !n[H.i]&&(function(I){return n[H.i]=true,I}).call(this,(l.groups.push(s)))},C=function(){var s=arguments;
return(function(H){return(function(K){var I,M,J,N,L;for(var J=0,N=K.length;J<N;++J){I=K[J],(H.push(I))}return K}).call(this,Array.prototype.slice.call(s,1)),H}).call(this,(new a.regexp.syntax(s[0],l)))
},t=function(s){return function(H){return H.i<y.length&&s.indexOf(y.charAt(H.i))!==-1&&{v:y.charAt(H.i),i:H.i+1}}},h=function(s){return function(H){return H.i<y.length&&y.substr(H.i,s.length)===s&&{v:y.substr(H.i,s.length),i:H.i+s.length}
}},m=function(H,s){return function(I){return I.i>=y.length||s(I)?false:{v:y.substr(I.i,H),i:I.i+H}}},w=function(s){return function(H){return H.i<y.length&&{v:y.substr(H.i,s),i:H.i+s}
}},G=function(){var s=arguments;return function(H){return(function(L){var I,N,J,O,M;for(var I=L[0],J=0,O=L.length,K;J<O;++J){I=L[J];if(K=(I(H))){return K}}return false
}).call(this,s)}},D=function(s){return function(H){return(function(I){return I.length>1&&{v:(function(L){var J,N,K,O,M;for(var M=new L.constructor(),K=0,O=L.length;
K<O;++K){J=L[K],M.push((J.v))}return M}).call(this,I.slice(1)),i:I[I.length-1].i}}).call(this,((function(K){var I,M,J,N,L;for(var L=[],I=K,J=0;I!==null;++J){L.push(I),I=(s(I)||null)
}return L}).call(this,H)))}},A=function(){var s=arguments;return function(H){return(function(){var I=[];return(function(J){return J&&{v:I,i:J.i}}).call(this,((function(L){var J,N,K,O,M;
for(var N=(H),K=0,O=L.length;K<O;++K){J=L[K],N=(N&&(function(P){return P&&I.push(P.v),P}).call(this,(J(N))))}return N}).call(this,s)))}).call(this)}},u=function(s){return s
},F=function(H,s){return function(I){return(function(){var J=H(I);return J&&{v:s.call(J,J.v),i:J.i}}).call(this)}},v=t("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_"),z=t("0123456789"),r=t("0123456789ABCDEFabcdef"),j=F(D(z),function(s){return +s.join("")
}),o=function(s){return s.i===y.length&&s},x=function(s){return x(s)},B=function(s){return B(s)},i=function(s){return i(s)},x=(function(){var s=function(H){return s(H)
},s=G(F(A(B,s),function(H){return C(",",H[0],H[1])}),B);return G(F(A(s,t("|"),x),function(H){return C("|",H[0],H[2])}),s,u)}).call(this),B=(function(){var K=F(t("*"),C),M=F(t("+"),C),J=F(t("?"),C),I=G(F(A(t("{"),j,t("}")),function(N){return C("{",C(N[1]),C(N[1]))
}),F(A(t("{"),j,t(","),t("}")),function(N){return C("{",C(N[1]),C(Infinity))}),F(A(t("{"),j,t(","),j,t("}")),function(N){return C("{",C(N[1]),C(N[3]))})),s=G(K,M,I),L=t("?"),H=G(F(A(s,L),function(N){return(function(O){return O.data+=N[1],O
}).call(this,(N[0]))}),s,J);return G(F(A(i,H),function(N){return(function(O){return O.push(N[0]),O}).call(this,(N[1]))}),i)}).call(this),i=(function(){var T=F(A(h("(?="),x,h(")")),function(ab){return C("(?=",ab[1])
}),s=F(A(h("(?!"),x,h(")")),function(ab){return C("(?!",ab[1])}),Y=F(A(h("(?:"),x,h(")")),function(ab){return C("(?:",ab[1])}),N=F(A(h("("),x,h(")")),function(ab){return(function(ac){return k(ac,this),ac
}).call(this,(C("(",ab[1])))}),U=F(D(v),function(ab){return C(ab.join(""))}),X=function(ab){return X(ab)},X=(function(){var ab=G(F(A(w(1),t("-"),w(1)),function(ac){return C("-",C(ac[0]),C(ac[2]))
}),F(A(t("\\"),w(1)),function(ac){return C(ac.join(""))}),F(m(1,t("]")),C));return G(F(A(ab,X),function(ac){return C(",",ac[0],ac[1])}),ab)}).call(this),H=F(A(h("[^"),X,h("]")),function(ab){return C("[^",ab[1])
}),I=F(A(h("["),X,h("]")),function(ab){return C("[",ab[1])}),Z=F(t("^$"),C),M=F(A(t("\\"),t("BbWwSsDdfnrtv0*+.?|()[]{}\\$^")),function(ab){return C(ab.join(""))}),aa=F(h("\\/"),function(ab){return C("/")
}),P=F(A(h("\\c"),w(1)),function(ab){return C(ab.join(""))}),V=F(A(h("\\x"),r,r),function(ab){return C(ab.join(""))}),S=F(A(h("\\u"),r,r,r,r),function(ab){return C(ab.join(""))
}),L=function(ab){return(function(){var ac=F(A(t("\\"),z),(function(ad){return C("\\",C(+ad[1]))}));return(function(ad){return ad&&ad.v<=l.groups.length?{v:C("\\",C(ad.v)),i:ad.i}:ac(ab)
}).call(this,(F(A(t("\\"),z,z),function(ad){return +(""+(ad[1])+""+(ad[2])+"")})(ab)))}).call(this)},R=F(t("."),C),K=F(m(1,t(")|+*?{")),C),Q=E.atom==="word"?G(U,K):K,W=E.atom==="word"?G(D(t(" ")),u):u,O=G(T,s,Y,N,H,I,Z,M,aa,P,V,S,L,R,Q),J=G(F(A(W,O,W),function(ab){return ab[1]
}),O);return J}).call(this);return(function(s){return s?s.v[0]:(function(){throw new Error(("caterwaul.regexp(): failed to parse "+(g.toString())+""))}).call(this)
}).call(this,(A(x,o)({i:0})))}).call(this)};return a.regexp=function(g,f){return a.regexp.parse.apply(this,arguments)},a.regexp.syntax=a.syntax_subclass(b,e),a.regexp.parse=d,a.regexp.compile=c
}).call(this)});